
CREATE TABLE ADMIN 
(
ADMIN_NAME VARCHAR(25),
ADMIN_ID VARCHAR(15) NOT NULL,
ADMIN_PASSWORD VARCHAR(10) NOT NULL,
EMAIL VARCHAR(50),
CONSTRAINT CHK_ADMIN_EMAIL
CHECK (
EMAIL LIKE '%@gmail.com')
);
select * from admin;

insert into admin values (
'jahidul islam', 'jahid', 'jahid', 'zahidmuhammad095@gmail.com');





CREATE TABLE OFFICIAL_INFORMATION
(
UNI_ID INT GENERATED BY DEFAULT AS IDENTITY START WITH 1,
FULL_NAME VARCHAR(100),
SHORT_NAME VARCHAR(10),
UNI_TYPE VARCHAR(10),
UNI_CATEGORY VARCHAR(30),
ESTABLISHED_DATE VARCHAR(15),
UNI_LOCATION VARCHAR(40),
DIVISION VARCHAR(15),
MOTTO VARCHAR(50),
CHANCELLOR VARCHAR(30) DEFAULT 'President Abdul Hamid',
VICE_CHANCELLOR VARCHAR(40),
CAMPUS_AREA VARCHAR(4),
AUDITORIUM VARCHAR(20),
REGISTER_OFFICE VARCHAR(30),
CONTACT VARCHAR(14),
WEBSITE VARCHAR(30),
LOGO BLOB,
CONSTRAINT PK_UNI_ID
PRIMARY KEY (UNI_ID),
CONSTRAINT UNQ_FULL_NAME
UNIQUE (FULL_NAME),
CONSTRAINT CHK_CONTACT
CHECK (CONTACT LIKE '011________'
OR CONTACT LIKE '015________'
OR CONTACT LIKE '016________'
OR CONTACT LIKE '017________'
OR CONTACT LIKE '018________'
OR CONTACT LIKE '019________'
OR CONTACT LIKE '02_______')
);

INSERT INTO OFFICIAL_INFORMATION(FULL_NAME, SHORT_NAME, UNI_TYPE, UNI_CATEGORY, ESTABLISHED_DATE, UNI_LOCATION,
DIVISION, MOTTO, VICE_CHANCELLOR, CAMPUS_AREA,
AUDITORIUM, REGISTER_OFFICE, CONTACT, WEBSITE)
VALUES ('Bangladesh University of Engineering and Technology',
'BUP', 'Public', 'General', '07-Jul-2008', 'Mirpur Cantonment',
'Dhaka', 'Excellence Through Knowledge',
'Major General Salauddin Sheikh Miaji', 
'100', 
'Bijoy', 'Major Mahmud', '01942564512', 'bup.edu.bd');






CREATE TABLE FACULTY
(
FACULTY_ID INT GENERATED BY DEFAULT AS IDENTITY START WITH 1001,
FACULTY_NAME VARCHAR(100),
FACULTY_DEAN VARCHAR(100),
UNI_ID INT,
CONSTRAINT PK_FACULTY_ID
PRIMARY KEY (FACULTY_ID),
CONSTRAINT FK_UNI_ID
FOREIGN KEY (UNI_ID)
REFERENCES OFFICIAL_INFORMATION (UNI_ID)
ON DELETE CASCADE
);

INSERT INTO FACULTY (FACULTY_NAME, FACULTY_DEAN, UNI_ID)
VALUES ('FBS', 'ME',
(
SELECT O.UNI_ID FROM OFFICIAL_INFORMATION O
WHERE O.SHORT_NAME = 'BUP'));









CREATE TABLE DEPARTMENT(
DEPARTMENT_ID INT GENERATED AS IDENTITY START WITH 1,
DEPARTMENT_NAME VARCHAR(80),
HEAD_OF_DEPARTMENT VARCHAR(80),
DEPARTMENT_DEGREE VARCHAR(80),
COURSE_DURATION VARCHAR(80),
SEMESTER VARCHAR(30),
CURRENT_BATCH VARCHAR(30),
EXPENDITURE VARCHAR(80),
CONTACT VARCHAR(14),
FACULTY_ID INT ,
CONSTRAINT PK_DEPARTMENT_DEPARTMENT_ID 
PRIMARY KEY(DEPARTMENT_ID),
CONSTRAINT FK_DEPARTMENT_FACULTY_ID 
FOREIGN KEY(FACULTY_ID) 
REFERENCES FACULTY(FACULTY_ID) ON DELETE CASCADE,
CONSTRAINT CHK_DEPARTMENT_CONTACT
CHECK (CONTACT LIKE '011________'
OR CONTACT LIKE '015________'
OR CONTACT LIKE '016________'
OR CONTACT LIKE '017________'
OR CONTACT LIKE '018________'
OR CONTACT LIKE '019________'
OR CONTACT LIKE '02_______')
);

INSERT INTO DEPARTMENT(DEPARTMENT_NAME, HEAD_OF_DEPARTMENT, DEPARTMENT_DEGREE, COURSE_DURATION, SEMESTER, CURRENT_BATCH,
EXPENDITURE, CONTACT, FACULTY_ID)
VALUES
(
'ICT', 'COL.JAGLUL', 'B.Sc.(Hons.)',
'4', '8', 'ICT_3', '175000', '01715503770',
(
SELECT FACULTY_ID FROM FACULTY
WHERE FACULTY_NAME = 'FST'
AND UNI_ID IN
(
SELECT UNI_ID FROM OFFICIAL_INFORMATION
WHERE FULL_NAME = 'Bangladesh University of Professionals') )
);







CREATE TABLE ACADEMIC_CURRICULUM
(
COURSE VARCHAR(100),
SEMESTER VARCHAR(2),
DEPARTMENT_ID INT,
CONSTRAINT UNQ_COURSE
UNIQUE (COURSE),
CONSTRAINT FK_DEPARTMENT_ID
FOREIGN KEY (DEPARTMENT_ID)
REFERENCES DEPARTMENT (DEPARTMENT_ID)
ON DELETE CASCADE
);

INSERT INTO ACADEMIC_CURRICULUM
VALUES ( 
'ADC', '4', 
(
SELECT D.DEPARTMENT_ID FROM DEPARTMENT D 
INNER JOIN FACULTY F
ON D.FACULTY_ID = F.FACULTY_ID
AND D.DEPARTMENT_NAME = 'ICT'
INNER JOIN OFFICIAL_INFORMATION O
ON F.UNI_ID = O.UNI_ID
AND O.FULL_NAME = 'Bangladesh University of Professionals')
);






CREATE TABLE UNIT_SELECTION 
( 
UNIT_ID INT GENERATED AS IDENTITY START WITH 101,
UNIT_NAME VARCHAR(2),
UNI_ID INT,
CONSTRAINT COMP_NAME_ID
UNIQUE (UNIT_NAME, UNI_ID),
CONSTRAINT PK_UNIT_SELECTION_UNIT_ID
PRIMARY KEY(UNIT_ID),
CONSTRAINT FK_UNIT_SELECTION_UNI_ID 
FOREIGN KEY(UNI_ID)
REFERENCES OFFICIAL_INFORMATION(UNI_ID) ON DELETE CASCADE
);

INSERT INTO UNIT_SELECTION (UNIT_NAME, UNI_ID)
VALUES (
'A', 
(
SELECT UNI_ID FROM OFFICIAL_INFORMATION
WHERE FULL_NAME = 'Bangladesh University of Professionals'
)
);







CREATE TABLE FACULTY_SELECTION 
(
FACULTY VARCHAR(80),
UNIT_ID INT,
CONSTRAINT FK_FACULTY_SELECTION_UNIT_ID 
FOREIGN KEY(UNIT_ID) 
REFERENCES UNIT_SELECTION(UNIT_ID) ON DELETE CASCADE );






-- Showing the tables

SELECT * FROM OFFICIAL_INFORMATION;
SELECT * FROM FACULTY;
SELECT * FROM DEPARTMENT;
SELECT * FROM ACADEMIC_CURRICULUM;

-- Get those varsities which are public

SELECT FULL_NAME, SHORT_NAME, UNI_TYPE
FROM OFFICIAL_INFORMATION
WHERE UNI_TYPE = 'Public';


--  Get all Department name from a varsity

SELECT O.FULL_NAME, F.FACULTY_NAME, D.DEPARTMENT_NAME
FROM DEPARTMENT D CROSS JOIN FACULTY F 
CROSS JOIN OFFICIAL_INFORMATION O
WHERE D.FACULTY_ID = F.FACULTY_ID
AND F.UNI_ID = O.UNI_ID;






commit;

SELECT TABLE_NAME, CONSTRAINT_NAME FROM USER_CONSTRAINTS
WHERE CONSTRAINT_TYPE = 'P' OR CONSTRAINT_TYPE = 'R';
